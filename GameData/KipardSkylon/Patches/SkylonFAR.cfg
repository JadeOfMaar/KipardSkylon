// Controls integration with Ferram Aerospace Research. Module Manager name = KipardSkylon_FAR
// Check out the Measurements folder to understand magic numbers

// -----------------------------------------------//
// Remove stock drag and lifting surfaces
// -----------------------------------------------//
@PART[KipEngSkylon*]:HAS[@MODULE[ModuleLiftingSurface]]:NEEDS[FerramAerospaceResearch|NEAR]:FOR[KipardSkylon_FAR]
{	
	!MODULE[ModuleLiftingSurface] {}
}

// --------
// Wings/Canards/Stabilizer
// --------
@PART[KipEngSkylon*]:HAS[@MODULE[ModuleControlSurface]]:NEEDS[FerramAerospaceResearch|NEAR]:FOR[KipardSkylon_FAR]
{
	@module = Part
	@maximum_drag = 0
	@minimum_drag = 0
	@angularDrag = 0
	@dragCoeff = 0
	@deflectionLiftCoeff = 0
    @ctrlSurfaceRange = 0
    @ctrlSurfaceArea = 0
    !MODULE[ModuleControlSurface] {}
}

// --------
// Intakes
// --------
@PART[KipEngSkylon*]:HAS[@MODULE[ModuleResourceIntake]]:NEEDS[FerramAerospaceResearch|NEAR]:FOR[KipardSkylon_FAR]
{
	@MODULE[ModuleResourceIntake]
	{
		useDynamicDrag = false
	}

	@maximum_drag = 0
	@minimum_drag = 0
	@angularDrag = 0
	@dragCoeff = 0
	@deflectionLiftCoeff = 0
}

// -----------------------------------------------//
// Add FAR control surfaces
// -----------------------------------------------//
// --------
// Wings
// --------
@PART[KipEngSkylonWingLeft]:NEEDS[FerramAerospaceResearch|NEAR]:FOR[KipardSkylon_FAR] {
    %MODULE[FARControllableSurface] 
	{
        %b_2 = 4.02
        %MAC = 10.66
        %TaperRatio = 0.56
        %MidChordSweep = 38.47 // degrees
        %rootMidChordOffsetFromOrig = 1.879, 0.842, 0
        %maxdeflect = 20
        %ctrlSurfFrac = 0.35
        %nonSideAttach = 0
    }
}

@PART[KipEngSkylonWingRight]:NEEDS[FerramAerospaceResearch|NEAR]:FOR[KipardSkylon_FAR] {
    %MODULE[FARControllableSurface] 
	{   
        %b_2 = 4.02
        %MAC = 10.66
        %TaperRatio = 0.56
        %MidChordSweep = 38.47 // degrees
        %rootMidChordOffsetFromOrig = -1.879, 0.842, 0
        %maxdeflect = 20
        %ctrlSurfFrac = 0.35
        %nonSideAttach = 0
    }
}

// --------
// Canards
// --------
@PART[KipEngSkylonCanardLeft]:NEEDS[FerramAerospaceResearch|NEAR]:FOR[KipardSkylon_FAR] {
    %MODULE[FARControllableSurface] 
	{
        %b_2 = 1.80
        %MAC = 2.22
        %TaperRatio = 0.25
        %MidChordSweep = 51.30 // degrees
        %rootMidChordOffsetFromOrig = 0.68, 0.79, 0
        %maxdeflect = 20
        %ctrlSurfFrac = 1
        %nonSideAttach = 0
    }
}

@PART[KipEngSkylonCanardRight]:NEEDS[FerramAerospaceResearch|NEAR]:FOR[KipardSkylon_FAR] {
    %MODULE[FARControllableSurface] 
	{
        %b_2 = 1.80
        %MAC = 2.22
        %TaperRatio = 0.25
        %MidChordSweep = 51.30 // degrees
        %rootMidChordOffsetFromOrig = -0.68, 0.79, 0
        %maxdeflect = 20
        %ctrlSurfFrac = 1
        %nonSideAttach = 0
    }
}

// --------
// Stabilizer
// --------
@PART[KipEngSkylonStabiliser]:NEEDS[FerramAerospaceResearch|NEAR]:FOR[KipardSkylon_FAR] {
    %MODULE[FARControllableSurface] 
	{
        %b_2 = 3.80
        %MAC = 3.73
        %TaperRatio = 0.21
        %MidChordSweep = 50.69 // degrees
        %rootMidChordOffsetFromOrig = 2.187, 0.480, 0
        %maxdeflect = 20
        %ctrlSurfFrac = 1
        %nonSideAttach = 0
    }
}